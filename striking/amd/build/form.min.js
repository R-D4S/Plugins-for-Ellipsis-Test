define(["jquery"],function(r){"use strict";return{init:{init:function(){var n=0;function i(){var t=r("#id_sentence").val().split(" "),i="";r.each(t,function(t,e){i+="<span class='striking' id='"+t+"'>"+e+"</span> "}),r("#fornew").html(i)}function t(){var t=parseFloat((1/n).toFixed(7));return 0==t?"0.0":1==t?"1.0":t}function a(){var e=t(),i=r("input[id^='id_answer_']");for(let t=0;t<i.length;t++)(""==i[t].value?r("select[id='id_fraction_"+t+"'] option[value='0.0']"):r("select[id='id_fraction_"+t+"'] option[value='"+e+"']")).prop("selected",!0)}r(document).on("change","#id_sentence",function(){n=0;var e=r("input[id^='id_answer_']");for(let t=0;t<e.length;t++)""!==e[t].value&&(e[t].value="");a(),i()}),r(document).on("click",".striking",function(){if(-1==(""+r(this).css("textDecoration")).indexOf("line-through")){r(this).css("textDecoration","line-through"),n+=1;t();var e=r(this).text(),i=r("input[id^='id_answer_']");for(let t=0;t<i.length;t++){if(""==i[t].value){i[t].value=e+"+"+r(this).attr("id");break}t==i.length-1&&r("#id_addanswers").click()}a()}else{--n;t();r(this).css("textDecoration","none");e=r(this).text()+"+"+r(this).attr("id"),i=r("input[id^='id_answer_']");for(let t=0;t<i.length;t++)if(i[t].value==e){i[t].value="";break}a()}}),r(document).ready(function(){var t;r("#id_generalheader").append("<div id='fornew' style='margin: 20px;font-size:larger;'></div>"),""!=r("#id_sentence").val()&&(i(),t=r("input[id^='id_answer_']"),r.each(t,function(){var t;""!=r(this).val()&&(n+=1,t=r(this).val().split("+")[1],r('span[id="'+t+'"]').css("textDecoration","line-through"))}))})}}.init}});